{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-bf698605cc0060d3.js","src/js/refs-lib.js","src/js/renderLib.js","src/js/lS-lib.js","node_modules/@parcel/runtime-js/lib/runtime-76951ddb4c9ab8e1.js","src/js/modal-card-lib.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"27Kop\\\":\\\"library.67295f4f.js\\\",\\\"4gX1q\\\":\\\"lenta.20eb106a.png\\\",\\\"5UbS1\\\":\\\"index.665f6faa.css\\\",\\\"j1QQf\\\":\\\"index.ab40fd9f.js\\\"}\"));","export const refs = {\n  watchedBtnLib: document.querySelector('[data-lib-watched]'),\n  queueBtnLib: document.querySelector('[data-lib-queue]'),\n  filmLibList: document.querySelector('.film-list'),\n  galleryCont: document.querySelector('.gallery-container'),\n};\n","import { refs } from './refs-lib';\n\nexport function renderMarkupLib(films) {\n  console.log(films);\n  const markup = films\n    .map(film => {\n      return `<li class=\"cards__item\" data-id=${film.id}> \n          <img \n            class=\"cards__photo\" \n            alt=\"film\" \n            src=${\n              film.poster_path\n                ? 'https://image.tmdb.org/t/p/w500/' + film.poster_path\n                : defimg\n            } \n            width=\"395\" \n            loading=\"lazy\" \n          /> \n          <h3 class=\"cards__title\">${film.title}</h3> \n          <p class=\"cards__info\">${film.genres\n            .map(({ name }) => name)\n            .join(', ')} | ${film.release_date}</p> \n          <p class=\"rating\">${film.vote_average.toFixed(1)}</p>\n        </li>`;\n    })\n    .join('');\n  refs.filmLibList.innerHTML = markup;\n  return markup;\n}\n","import { renderMarkupLib } from './renderLib';\nimport { refs } from './refs-lib';\nimport img from '../../images/lenta.png';\n\nrenderWatchedFilms();\nrenderQueueFilms();\n\nrefs.watchedBtnLib.addEventListener('click', renderWatchedFilms);\n\nrefs.queueBtnLib.addEventListener('click', renderQueueFilms);\n\nfunction renderWatchedFilms() {\n  const films = JSON.parse(localStorage.getItem('watched')) || [];\n  if (!films.length) {\n    refs.galleryCont.innerHTML = `<p class=\"lib-text\">There are no films here yet</p>\n<img src=\"${img}\" alt=\"lenta\" width=\"500\">`;\n    return;\n  }\n\n  renderMarkupLib(films);\n  refs.watchedBtnLib.classList.add('active');\n  refs.queueBtnLib.classList.remove('active');\n}\n\nfunction renderQueueFilms() {\n  const films = JSON.parse(localStorage.getItem('queue')) || [];\n  if (!films.length) {\n    refs.filmLibList.innerHTML = `<p class=\"lib-text\">There are no films here ... yet!\n<img src=\"${img}\" alt=\"lenta\" width=\"500\"></p>`;\n    return;\n  }\n  renderMarkupLib(films);\n  refs.queueBtnLib.classList.add('active');\n  refs.watchedBtnLib.classList.remove('active');\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('27Kop') + require('./helpers/bundle-manifest').resolve(\"4gX1q\");","import { FilmAPI } from './FilmAPI.js';\nimport { refs } from './refs-lib.js';\nimport { onOpenVideo } from './trailer.js';\nimport { onWatchedBtnClick, onQueueBtnClick } from './localStorage.js';\nconst filmApi = new FilmAPI();\nconst modalBackdrop = document.querySelector('.backdrop__modal-film');\nconst buttonCloseModal = document.querySelector('#modal-close-button');\nconst modalCardInfo = document.querySelector('.modal-film__info');\n// console.log(onQueueBtnClick);\n\nrefs.filmLibList.addEventListener('click', onOpenModal);\n\nasync function onOpenModal(event) {\n  if (!event.target.closest('[data-id]')) {\n    return;\n  }\n\n  const currentCardId = event.target.closest('li').dataset.id;\n  const movieRes = await filmApi.getFilmDetails(currentCardId);\n  console.log(movieRes);\n  createMovieCard(movieRes);\n\n  refs.openTrailerFilm = document.querySelector('[data-modal-trailer]');\n  refs.openTrailerFilm.addEventListener('click', () => {\n    onOpenVideo(currentCardId);\n  });\n  refs.watchedBtn = document.querySelector('[data-modal-watched-id]');\n  refs.queueBtn = document.querySelector('[data-modal-queue-id]');\n  console.log(refs.queueBtn);\n  refs.watchedBtn.addEventListener('click', onWatchedBtnClick);\n  refs.queueBtn.addEventListener('click', onQueueBtnClick);\n\n  modalBackdrop.classList.remove('is-hidden');\n  window.addEventListener('click', closeModalbyBackdrop);\n  window.addEventListener('keydown', onKeyClick);\n  buttonCloseModal.addEventListener('click', closeModalbyCross);\n}\n\nfunction closeModalbyCross() {\n  modalBackdrop.classList.add('is-hidden');\n  modalCardInfo.innerHTML = '';\n  clearBackdropListeners();\n}\n\nfunction onKeyClick(event) {\n  if (event.code !== 'Escape') {\n    return;\n  }\n  modalBackdrop.classList.add('is-hidden');\n  modalCardInfo.innerHTML = '';\n  clearBackdropListeners();\n}\n\nfunction closeModalbyBackdrop(event) {\n  if (event.target === event.currentTarget) {\n    modalBackdrop.classList.add('is-hidden');\n    modalCardInfo.innerHTML = '';\n    clearBackdropListeners();\n  }\n}\n\nfunction clearBackdropListeners() {\n  window.removeEventListener('keydown', onKeyClick);\n  window.removeEventListener('click', closeModalbyBackdrop);\n  buttonCloseModal.removeEventListener('click', closeModalbyCross);\n}\n\nfunction createMovieCard(obj) {\n  const {\n    title,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    overview,\n    genres,\n    poster_path,\n    id,\n  } = obj;\n  const watchedFilms = JSON.parse(localStorage.getItem('watched')) || [];\n  const queuedFilms = JSON.parse(localStorage.getItem('queue')) || [];\n  const inWatched = watchedFilms.some(film => film.id === id);\n  const isQueued = queuedFilms.some(film => film.id === id);\n  const genresArr = genres.map(el => el.name);\n\n  const markupModal = `\n        <div class=\"film-card\">\n            <div class=\"film-card__img\">\n            <img class=\"film-card__picture\" src=${\n              poster_path\n                ? 'https://image.tmdb.org/t/p/w500/' + poster_path\n                : defimg\n            } alt=\"${title}\" width=\"375\">\n            </div>\n            <div class=\"film-card__info\">\n            <h2 class=\"film-card__title\">${title}</h2>\n            <div class=\"film-card__general-info\">\n                <ul class=\"info-list\">\n                <li class=\"info\">\n                <p class=\"info-item\">Vote/Votes</p>\n                <p class=\"info-result\"><span class=\"accent-vote\">${vote_average.toFixed(\n                  1\n                )}</span>/${vote_count}</p>\n                </li>\n                <li class=\"info\">\n                <p class=\"info-item\">Popularity</p>\n                <p class=\"info-result\">${popularity.toFixed(1)}</p>\n                </li>\n                <li class=\"info\">\n                <p class=\"info-item\">Original Title</p>\n                <p class=\"info-result  to-up\">${original_title}</p>\n                </li>\n                <li class=\"info\">\n                <p class=\"info-item\">Genre</p>\n                <p class=\"info-result\">${[...genresArr]}</p>\n                </li>\n                </ul>\n            </div>\n            <p class=\"film-card__overview-title\">About</p>\n            <p class=\"film-card__overview\">${overview}</p>\n            <div class=\"modal-film__buttons-block\">\n                <button type=\"submit\" class=\"btn-watched button\" data-modal-watched-id=${id} data-action=\"${\n    inWatched ? 'remove' : 'add'\n  }\">\n        ${inWatched ? 'Remove from watched' : 'Add to watch'}</button>\n                <button type=\"submit\" class=\"btn-queue button\" data-modal-queue-id=${id}  data-action=\"${\n    isQueued ? 'remove' : 'add'\n  }\">\n        ${isQueued ? 'Remove from queue' : 'Add to queue'}</button>\n                <button type=\"submit\" class=\"btn-trailer button\" data-modal-trailer><span></span>\n        <span></span>\n        <span></span>\n        <span></span>Watch trailer</button>\n            </div>\n            </div>\n        </div>\n    `;\n  modalCardInfo.innerHTML = markupModal;\n  return markupModal;\n}\n"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$83e041e71d3a8e94$export$21666b427502ea6d","watchedBtnLib","document","querySelector","queueBtnLib","filmLibList","galleryCont","$ffa438fab8a6ecc7$export$4f19a777e63c9bb8","films","console","log","markup","map","film","concat","poster_path","defimg","title","genres","param","name","join","release_date","vote_average","toFixed","innerHTML","$91869a3b6f000f01$var$renderWatchedFilms","localStorage","getItem","classList","add","remove","$parcel$interopDefault","$4338a69a193adc82$exports","$91869a3b6f000f01$var$renderQueueFilms","getBundleURL","resolve","addEventListener","$bpxeT","$ca4764b680dcd8a3$var$filmApi","$f8mqk","FilmAPI","$ca4764b680dcd8a3$var$modalBackdrop","$ca4764b680dcd8a3$var$buttonCloseModal","$ca4764b680dcd8a3$var$modalCardInfo","$ca4764b680dcd8a3$var$_onOpenModal","$2TvXO","mark","_callee","event","currentCardId","movieRes","target","closest","dataset","getFilmDetails","_ctx","sent","$ca4764b680dcd8a3$var$createMovieCard","openTrailerFilm","$cDXQO","onOpenVideo","watchedBtn","queueBtn","$UL92Z","onWatchedBtnClick","onQueueBtnClick","window","$ca4764b680dcd8a3$var$closeModalbyBackdrop","$ca4764b680dcd8a3$var$onKeyClick","$ca4764b680dcd8a3$var$closeModalbyCross","apply","this","arguments","$ca4764b680dcd8a3$var$clearBackdropListeners","code","currentTarget","removeEventListener","obj","vote_count","popularity","original_title","overview","watchedFilms","queuedFilms","inWatched","some","isQueued","genresArr","el","markupModal","$8nrFW"],"version":3,"file":"library.67295f4f.js.map"}