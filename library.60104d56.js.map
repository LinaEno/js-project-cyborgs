{"mappings":"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","sources":["src/js/refs-lib.js","src/js/renderLib.js","src/js/lS-lib.js","src/js/modal-card-lib.js"],"sourcesContent":["\nexport const refs = {\n    watchedBtnLib: document.querySelector('[data-lib-watched]'),\n    queueBtnLib: document.querySelector('[data-lib-queue]'),\n    filmLibList: document.querySelector('.film-list'),\n}","import { refs } from \"./refs-lib\";\n\n\nexport function renderMarkupLib(films) { \n  console.log(films);\n  const markup = films \n    .map(film => { \n      return `<li class=\"cards__item\" data-id=${film.id}> \n          <img \n            class=\"cards__photo\" \n            alt=\"film\" \n            src=\"https://image.tmdb.org/t/p/w500${film.poster_path}\" \n            width=\"395\" \n            loading=\"lazy\" \n          /> \n          <h3 class=\"cards__title\">${film.title}</h3> \n          <p class=\"cards__info\">${film.genres.map(({name})=>name).join(', ')} | ${film.release_date}</p> \n          <p class=\"rating\">${film.vote_average.toFixed(1)}</p>\n        </li>`; \n    }) \n    .join(''); \n  refs.filmLibList.innerHTML=markup; \n  return markup; \n} ","import { renderMarkupLib } from \"./renderLib\";\nimport { refs } from \"./refs-lib\";\n\nrefs.watchedBtnLib.addEventListener('click', renderWatchedFilms);\n\nrefs.queueBtnLib.addEventListener('click', renderQueueFilms);\n\nfunction renderWatchedFilms() {\n    const films = JSON.parse(localStorage.getItem(\"watched\")) || [];\n    if (!films.length) {\n        refs.filmLibList.innerHTML = \"Not films\"\n        return;\n    }\n    renderMarkupLib(films);\n    refs.watchedBtnLib.classList.add('active');\n    refs.queueBtnLib.classList.remove('active');\n\n\n}\n\nfunction renderQueueFilms() {\n    const films = JSON.parse(localStorage.getItem(\"queue\")) || [];\n    if (!films.length) {\n        refs.filmLibList.innerHTML = \"Not films\"\n        return\n    }\n    renderMarkupLib(films);\n    refs.queueBtnLib.classList.add('active');\n    refs.watchedBtnLib.classList.remove('active');\n}\n\nrenderWatchedFilms();\nrenderQueueFilms();","import {FilmAPI} from './FilmAPI.js'\nimport { refs } from './refs.js';\nimport { onOpenVideo } from './trailer.js';\nimport { onWatchedBtnClick, onQueueBtnClick } from './localStorage.js';\nconst filmApi= new FilmAPI();\nconst modalBackdrop = document.querySelector('.backdrop__modal-film');\nconst buttonCloseModal = document.querySelector('#modal-close-button');\nconst modalCardInfo = document.querySelector('.modal-film__info');\n// console.log(onQueueBtnClick);\n\nrefs.cardsListEl.addEventListener('click', onOpenModal);\n\nasync function onOpenModal(event) {\n  if (!event.target.closest('[data-id]')) {\n    return;\n  }\n \n  const currentCardId = event.target.closest('li').dataset.id;\n    const movieRes = await filmApi.getFilmDetails(currentCardId);\n    console.log(movieRes)\n  createMovieCard(movieRes);\n\n  refs.openTrailerFilm = document.querySelector('[data-modal-trailer]');\n  refs.openTrailerFilm.addEventListener('click', () => {\n    onOpenVideo(currentCardId);\n  });\n  refs.watchedBtn = document.querySelector('[data-modal-watched-id]')\n  refs.queueBtn = document.querySelector('[data-modal-queue-id]')\n console.log(refs.queueBtn);\n  refs.watchedBtn.addEventListener('click', onWatchedBtnClick);\n  refs.queueBtn.addEventListener('click', onQueueBtnClick);\n  \n  modalBackdrop.classList.remove('is-hidden');\n  window.addEventListener('click', closeModalbyBackdrop);\n  window.addEventListener('keydown', onKeyClick);\n  buttonCloseModal.addEventListener('click', closeModalbyCross);\n\n}\n\nfunction closeModalbyCross() {\n  modalBackdrop.classList.add('is-hidden');\n  modalCardInfo.innerHTML = '';\n  clearBackdropListeners();\n}\n\nfunction onKeyClick(event) {\n  if (event.code !== 'Escape') {\n    return;\n  }\n  modalBackdrop.classList.add('is-hidden');\n  modalCardInfo.innerHTML = '';\n  clearBackdropListeners();\n}\n\nfunction closeModalbyBackdrop(event) {\n  if (event.target === event.currentTarget) {\n    modalBackdrop.classList.add('is-hidden');\n    modalCardInfo.innerHTML = '';\n    clearBackdropListeners();\n  }\n}\n\nfunction clearBackdropListeners() {\n  window.removeEventListener('keydown', onKeyClick);\n  window.removeEventListener('click', closeModalbyBackdrop);\n  buttonCloseModal.removeEventListener('click', closeModalbyCross);\n}\n\nfunction createMovieCard(obj) {\n  const {\n    title,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    overview,\n    genres,\n    poster_path,\n    id\n  } = obj;\n  const genresArr = genres.map(el => el.name);\n  \n  const markupModal = `\n        <div class=\"film-card\">\n            <div class=\"film-card__img\">\n            <img class=\"film-card__picture\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${title}\" width=\"375\">\n            </div>\n            <div class=\"film-card__info\">\n            <h2 class=\"film-card__title\">${title}</h2>\n            <div class=\"film-card__general-info\">\n                <ul class=\"info-list\">\n                <li class=\"info\">\n                <p class=\"info-item\">Vote/Votes</p>\n                <p class=\"info-result\"><span class=\"accent-vote\">${vote_average.toFixed(1)}</span>/${vote_count}</p>\n                </li>\n                <li class=\"info\">\n                <p class=\"info-item\">Popularity</p>\n                <p class=\"info-result\">${popularity.toFixed(1)}</p>\n                </li>\n                <li class=\"info\">\n                <p class=\"info-item\">Original Title</p>\n                <p class=\"info-result  to-up\">${original_title}</p>\n                </li>\n                <li class=\"info\">\n                <p class=\"info-item\">Genre</p>\n                <p class=\"info-result\">${[...genresArr]}</p>\n                </li>\n                </ul>\n            </div>\n            <p class=\"film-card__overview-title\">About</p>\n            <p class=\"film-card__overview\">${overview}</p>\n            <div class=\"modal-film__buttons-block\">\n                <button type=\"submit\" class=\"btn-watched button\" data-modal-watched-id=${id}>\n        Add to watched</button>\n                <button type=\"submit\" class=\"btn-queue button\" data-modal-queue-id=${id}>\n        Add to queue</button>\n                <button type=\"submit\" class=\"btn-trailer button\" data-modal-trailer><span></span>\n        <span></span>\n        <span></span>\n        <span></span>Watch trailer</button>\n            </div>\n            </div>\n        </div>\n    `;\n  modalCardInfo.innerHTML = markupModal;\n    return markupModal;\n}"],"names":["$46347076cc9f8e85$export$21666b427502ea6d","watchedBtnLib","document","querySelector","queueBtnLib","filmLibList","$bbadd28dbdeb8bd5$export$4f19a777e63c9bb8","films","console","log","markup","map","film","id","poster_path","title","genres","name","join","release_date","vote_average","toFixed","innerHTML","$5f9454757ad34c24$var$renderWatchedFilms","JSON","parse","localStorage","getItem","length","classList","add","remove","$5f9454757ad34c24$var$renderQueueFilms","addEventListener","$hv3Jw","parcelRequire","$7c5b3959f6dbe73a$var$filmApi","FilmAPI","$7c5b3959f6dbe73a$var$modalBackdrop","$7c5b3959f6dbe73a$var$buttonCloseModal","$7c5b3959f6dbe73a$var$modalCardInfo","$7c5b3959f6dbe73a$var$closeModalbyCross","$7c5b3959f6dbe73a$var$clearBackdropListeners","$7c5b3959f6dbe73a$var$onKeyClick","event","code","$7c5b3959f6dbe73a$var$closeModalbyBackdrop","target","currentTarget","window","removeEventListener","$krGWQ","refs","cardsListEl","async","closest","currentCardId","dataset","movieRes","getFilmDetails","obj","vote_count","popularity","original_title","overview","genresArr","el","markupModal","$7c5b3959f6dbe73a$var$createMovieCard","openTrailerFilm","$37v9V","onOpenVideo","watchedBtn","queueBtn","$31u3U","onWatchedBtnClick","onQueueBtnClick"],"version":3,"file":"library.60104d56.js.map"}