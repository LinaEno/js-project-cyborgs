{"mappings":"ujBACO,IAAMA,EAAO,CAChBC,cAAeC,SAASC,cAAc,sBACtCC,YAAaF,SAASC,cAAc,oBACpCE,YAAaH,SAASC,cAAc,eCDjC,SAASG,EAAgBC,GAC9BC,QAAQC,IAAIF,GACZ,IAAMG,EAASH,EACZI,KAAI,SAAAC,GACH,MAAO,mCAIqCC,OAJFD,EAAKE,GAAG,qIAQnBD,OAJaD,EAAKG,YAAY,iHAKhCF,OADED,EAAKI,MAAM,6CACmCH,OAAhDD,EAAKK,OAAON,KAAI,SAAAO,G,OAAMA,EAAJC,I,IAAcC,KAAK,MAAM,OAChDP,OADqDD,EAAKS,aAAa,uCAC1CR,OAA7BD,EAAKU,aAAaC,QAAQ,GAAG,sB,IAGtDH,KAAK,IAER,OADApB,EAAKK,YAAYmB,UAAUd,EACpBA,C,CCfT,SAASe,IACL,IAAMlB,EAAQmB,KAAKC,MAAMC,aAAaC,QAAQ,aAAe,GACxDtB,EAAMuB,QAIXxB,EAAgBC,GAChBP,EAAKC,cAAc8B,UAAUC,IAAI,UACjChC,EAAKI,YAAY2B,UAAUE,OAAO,WAL9BjC,EAAKK,YAAYmB,UAAY,W,CAUrC,SAASU,IACL,IAAM3B,EAAQmB,KAAKC,MAAMC,aAAaC,QAAQ,WAAa,GACtDtB,EAAMuB,QAIXxB,EAAgBC,GAChBP,EAAKI,YAAY2B,UAAUC,IAAI,UAC/BhC,EAAKC,cAAc8B,UAAUE,OAAO,WALhCjC,EAAKK,YAAYmB,UAAY,W,CApBrCxB,EAAKC,cAAckC,iBAAiB,QAASV,GAE7CzB,EAAKI,YAAY+B,iBAAiB,QAASD,GA0B3CT,IACAS,I,WChCA,IAAAE,EAAAC,EAAA,S,iEAIMC,EAAU,IAAI,EAAAC,EAAAC,SACdC,EAAgBvC,SAASC,cAAc,yBACvCuC,EAAmBxC,SAASC,cAAc,uBAC1CwC,EAAgBzC,SAASC,cAAc,qB,SAK9ByC,I,OAAAA,EAAfC,EAAAT,EAAA,CAAAS,EAAAC,GAAAC,MAAA,SAAAC,EAA2BC,G,IAKnBC,EACAC,E,qEALDF,EAAMG,OAAOC,QAAQ,aAAY,C,uDAIhCH,EAAgBD,EAAMG,OAAOC,QAAQ,MAAMC,QAAQxC,G,SAClCwB,EAAQiB,eAAeL,G,OAAxCC,EAAQK,EAAAC,KACdjD,QAAQC,IAAI0C,GACZO,EAAgBP,IAEhBnD,EAAK2D,gBAAkBzD,SAASC,cAAc,yBACzBgC,iBAAiB,SAAS,YAC7C,EAAAyB,EAAAC,aAAYX,E,IAEdlD,EAAK8D,WAAa5D,SAASC,cAAc,2BACzCH,EAAK+D,SAAW7D,SAASC,cAAc,yBACvCK,QAAQC,IAAIT,EAAK+D,UACjB/D,EAAK8D,WAAW3B,iBAAiB,QAAS6B,EAAAC,mBAC1CjE,EAAK+D,SAAS5B,iBAAiB,QAAS6B,EAAAE,iBAExCzB,EAAcV,UAAUE,OAAO,aAC/BkC,OAAOhC,iBAAiB,QAASiC,GACjCD,OAAOhC,iBAAiB,UAAWkC,GACnC3B,EAAiBP,iBAAiB,QAASmC,G,6CAvBnBC,MAAAC,KAAAC,U,CA0B1B,SAASH,IACP7B,EAAcV,UAAUC,IAAI,aAC5BW,EAAcnB,UAAY,GAC1BkD,G,CAGF,SAASL,EAAWpB,GACC,WAAfA,EAAM0B,OAGVlC,EAAcV,UAAUC,IAAI,aAC5BW,EAAcnB,UAAY,GAC1BkD,I,CAGF,SAASN,EAAqBnB,GACxBA,EAAMG,SAAWH,EAAM2B,gBACzBnC,EAAcV,UAAUC,IAAI,aAC5BW,EAAcnB,UAAY,GAC1BkD,I,CAIJ,SAASA,IACPP,OAAOU,oBAAoB,UAAWR,GACtCF,OAAOU,oBAAoB,QAAST,GACpC1B,EAAiBmC,oBAAoB,QAASP,E,CAGhD,SAASZ,EAAgBoB,GACvB,IACE9D,EASE8D,EATF9D,MACAM,EAQEwD,EARFxD,aACAyD,EAOED,EAPFC,WACAC,EAMEF,EANFE,WACAC,EAKEH,EALFG,eACAC,EAIEJ,EAJFI,SACAjE,EAGE6D,EAHF7D,OACAF,EAEE+D,EAFF/D,YACAD,EACEgE,EADFhE,GAEIqE,EAAezD,KAAKC,MAAMC,aAAaC,QAAQ,aAAe,GAC9DuD,EAAc1D,KAAKC,MAAMC,aAAaC,QAAQ,WAAa,GAC3DwD,EAAYF,EAAaG,MAAK,SAAA1E,G,OAAQA,EAAKE,KAAOA,C,IAClDyE,EAAWH,EAAYE,MAAK,SAAA1E,G,OAAQA,EAAKE,KAAOA,C,IAChD0E,EAAYvE,EAAON,KAAI,SAAA8E,G,OAAMA,EAAGtE,I,IAEhCuE,EAAc,gKAGiF7E,OAArBE,EAAY,WAGnDF,OAH4DG,EAAM,4HAQ1CH,OALxBG,EAAM,+PAOrBH,OAFuCS,EAAaC,QAC9D,GACA,YAIuBV,OAJbkE,EAAW,gKAQSlE,OAJPmE,EAAWzD,QAAQ,GAAG,2KAQtBV,OAJOoE,EAAe,2JASlBpE,OALHgC,EAAA8C,EAAA,CAAGH,GAAW,mLAOiC3E,OAF5CqE,EAAS,sJAG5CrE,OAD+EC,EAAG,kCAEPD,OAD3EwE,EAAY,sBAAwB,iBAAiB,kGAErDxE,OAD2EC,EAAG,kCAC9BD,OAAhD0E,EAAW,oBAAsB,eAAe,yQAUxD,OADA5C,EAAcnB,UAAYkE,EACnBA,C,CAxHT1F,EAAKK,YAAY8B,iBAAiB,S,SAEPc,G,OAAZL,EAAW2B,MAAAC,KAAAC,U","sources":["src/js/refs-lib.js","src/js/renderLib.js","src/js/lS-lib.js","src/js/modal-card-lib.js"],"sourcesContent":["\nexport const refs = {\n    watchedBtnLib: document.querySelector('[data-lib-watched]'),\n    queueBtnLib: document.querySelector('[data-lib-queue]'),\n    filmLibList: document.querySelector('.film-list'),\n}","import { refs } from \"./refs-lib\";\n\n\nexport function renderMarkupLib(films) { \n  console.log(films);\n  const markup = films \n    .map(film => { \n      return `<li class=\"cards__item\" data-id=${film.id}> \n          <img \n            class=\"cards__photo\" \n            alt=\"film\" \n            src=\"https://image.tmdb.org/t/p/w500${film.poster_path}\" \n            width=\"395\" \n            loading=\"lazy\" \n          /> \n          <h3 class=\"cards__title\">${film.title}</h3> \n          <p class=\"cards__info\">${film.genres.map(({name})=>name).join(', ')} | ${film.release_date}</p> \n          <p class=\"rating\">${film.vote_average.toFixed(1)}</p>\n        </li>`; \n    }) \n    .join(''); \n  refs.filmLibList.innerHTML=markup; \n  return markup; \n} ","import { renderMarkupLib } from \"./renderLib\";\nimport { refs } from \"./refs-lib\";\n\nrefs.watchedBtnLib.addEventListener('click', renderWatchedFilms);\n\nrefs.queueBtnLib.addEventListener('click', renderQueueFilms);\n\nfunction renderWatchedFilms() {\n    const films = JSON.parse(localStorage.getItem(\"watched\")) || [];\n    if (!films.length) {\n        refs.filmLibList.innerHTML = \"Not films\"\n        return;\n    }\n    renderMarkupLib(films);\n    refs.watchedBtnLib.classList.add('active');\n    refs.queueBtnLib.classList.remove('active');\n\n\n}\n\nfunction renderQueueFilms() {\n    const films = JSON.parse(localStorage.getItem(\"queue\")) || [];\n    if (!films.length) {\n        refs.filmLibList.innerHTML = \"Not films\"\n        return\n    }\n    renderMarkupLib(films);\n    refs.queueBtnLib.classList.add('active');\n    refs.watchedBtnLib.classList.remove('active');\n}\n\nrenderWatchedFilms();\nrenderQueueFilms();","import { FilmAPI } from './FilmAPI.js';\nimport { refs } from './refs-lib.js';\nimport { onOpenVideo } from './trailer.js';\nimport { onWatchedBtnClick, onQueueBtnClick } from './localStorage.js';\nconst filmApi = new FilmAPI();\nconst modalBackdrop = document.querySelector('.backdrop__modal-film');\nconst buttonCloseModal = document.querySelector('#modal-close-button');\nconst modalCardInfo = document.querySelector('.modal-film__info');\n// console.log(onQueueBtnClick);\n\nrefs.filmLibList.addEventListener('click', onOpenModal);\n\nasync function onOpenModal(event) {\n  if (!event.target.closest('[data-id]')) {\n    return;\n  }\n\n  const currentCardId = event.target.closest('li').dataset.id;\n  const movieRes = await filmApi.getFilmDetails(currentCardId);\n  console.log(movieRes);\n  createMovieCard(movieRes);\n\n  refs.openTrailerFilm = document.querySelector('[data-modal-trailer]');\n  refs.openTrailerFilm.addEventListener('click', () => {\n    onOpenVideo(currentCardId);\n  });\n  refs.watchedBtn = document.querySelector('[data-modal-watched-id]');\n  refs.queueBtn = document.querySelector('[data-modal-queue-id]');\n  console.log(refs.queueBtn);\n  refs.watchedBtn.addEventListener('click', onWatchedBtnClick);\n  refs.queueBtn.addEventListener('click', onQueueBtnClick);\n\n  modalBackdrop.classList.remove('is-hidden');\n  window.addEventListener('click', closeModalbyBackdrop);\n  window.addEventListener('keydown', onKeyClick);\n  buttonCloseModal.addEventListener('click', closeModalbyCross);\n}\n\nfunction closeModalbyCross() {\n  modalBackdrop.classList.add('is-hidden');\n  modalCardInfo.innerHTML = '';\n  clearBackdropListeners();\n}\n\nfunction onKeyClick(event) {\n  if (event.code !== 'Escape') {\n    return;\n  }\n  modalBackdrop.classList.add('is-hidden');\n  modalCardInfo.innerHTML = '';\n  clearBackdropListeners();\n}\n\nfunction closeModalbyBackdrop(event) {\n  if (event.target === event.currentTarget) {\n    modalBackdrop.classList.add('is-hidden');\n    modalCardInfo.innerHTML = '';\n    clearBackdropListeners();\n  }\n}\n\nfunction clearBackdropListeners() {\n  window.removeEventListener('keydown', onKeyClick);\n  window.removeEventListener('click', closeModalbyBackdrop);\n  buttonCloseModal.removeEventListener('click', closeModalbyCross);\n}\n\nfunction createMovieCard(obj) {\n  const {\n    title,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    overview,\n    genres,\n    poster_path,\n    id,\n  } = obj;\n  const watchedFilms = JSON.parse(localStorage.getItem('watched')) || [];\n  const queuedFilms = JSON.parse(localStorage.getItem('queue')) || [];\n  const inWatched = watchedFilms.some(film => film.id === id);\n  const inQueued = queuedFilms.some(film => film.id === id);\n  const genresArr = genres.map(el => el.name);\n\n  const markupModal = `\n        <div class=\"film-card\">\n            <div class=\"film-card__img\">\n            <img class=\"film-card__picture\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${title}\" width=\"375\">\n            </div>\n            <div class=\"film-card__info\">\n            <h2 class=\"film-card__title\">${title}</h2>\n            <div class=\"film-card__general-info\">\n                <ul class=\"info-list\">\n                <li class=\"info\">\n                <p class=\"info-item\">Vote/Votes</p>\n                <p class=\"info-result\"><span class=\"accent-vote\">${vote_average.toFixed(\n                  1\n                )}</span>/${vote_count}</p>\n                </li>\n                <li class=\"info\">\n                <p class=\"info-item\">Popularity</p>\n                <p class=\"info-result\">${popularity.toFixed(1)}</p>\n                </li>\n                <li class=\"info\">\n                <p class=\"info-item\">Original Title</p>\n                <p class=\"info-result  to-up\">${original_title}</p>\n                </li>\n                <li class=\"info\">\n                <p class=\"info-item\">Genre</p>\n                <p class=\"info-result\">${[...genresArr]}</p>\n                </li>\n                </ul>\n            </div>\n            <p class=\"film-card__overview-title\">About</p>\n            <p class=\"film-card__overview\">${overview}</p>\n            <div class=\"modal-film__buttons-block\">\n                <button type=\"submit\" class=\"btn-watched button\" data-modal-watched-id=${id}  data-action=\"add\">\n        ${inWatched ? 'Remove from watched' : 'Add to watched'}</button>\n                <button type=\"submit\" class=\"btn-queue button\" data-modal-queue-id=${id}  data-action=\"add\">\n        ${inQueued ? 'Remove from queue' : 'Add to queue'}</button>\n                <button type=\"submit\" class=\"btn-trailer button\" data-modal-trailer><span></span>\n        <span></span>\n        <span></span>\n        <span></span>Watch trailer</button>\n            </div>\n            </div>\n        </div>\n    `;\n  modalCardInfo.innerHTML = markupModal;\n  return markupModal;\n}\n"],"names":["$83e041e71d3a8e94$export$21666b427502ea6d","watchedBtnLib","document","querySelector","queueBtnLib","filmLibList","$ffa438fab8a6ecc7$export$4f19a777e63c9bb8","films","console","log","markup","map","film","concat","id","poster_path","title","genres","param","name","join","release_date","vote_average","toFixed","innerHTML","$91869a3b6f000f01$var$renderWatchedFilms","JSON","parse","localStorage","getItem","length","classList","add","remove","$91869a3b6f000f01$var$renderQueueFilms","addEventListener","$bpxeT","parcelRequire","$ca4764b680dcd8a3$var$filmApi","$f8mqk","FilmAPI","$ca4764b680dcd8a3$var$modalBackdrop","$ca4764b680dcd8a3$var$buttonCloseModal","$ca4764b680dcd8a3$var$modalCardInfo","$ca4764b680dcd8a3$var$_onOpenModal","$parcel$interopDefault","$2TvXO","mark","_callee","event","currentCardId","movieRes","target","closest","dataset","getFilmDetails","_ctx","sent","$ca4764b680dcd8a3$var$createMovieCard","openTrailerFilm","$cDXQO","onOpenVideo","watchedBtn","queueBtn","$UL92Z","onWatchedBtnClick","onQueueBtnClick","window","$ca4764b680dcd8a3$var$closeModalbyBackdrop","$ca4764b680dcd8a3$var$onKeyClick","$ca4764b680dcd8a3$var$closeModalbyCross","apply","this","arguments","$ca4764b680dcd8a3$var$clearBackdropListeners","code","currentTarget","removeEventListener","obj","vote_count","popularity","original_title","overview","watchedFilms","queuedFilms","inWatched","some","inQueued","genresArr","el","markupModal","$8nrFW"],"version":3,"file":"library.dc41bb67.js.map"}