!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a("f8mqk"),a("kvC6y");var o=a("bpxeT"),i=a("8nrFW"),c=a("2TvXO"),s=a("f8mqk"),l={searchForm:document.querySelector(".js-search-form"),formWarning:document.querySelector(".header-form__warning"),cardsListEl:document.querySelector(".cards__list"),backdrop:document.querySelector(".backdrop"),closeModalBtn:document.querySelector(".btn-close"),trailerBtn:document.querySelector("[data-modal-trailer]"),openTrailerFilm:null,watchedBtn:null,queueBtn:null},d=(o=a("bpxeT"),c=a("2TvXO"),s=a("f8mqk"),{closeModalBtn:document.querySelector("[data-modal-trailer-close]"),modal:document.querySelector("[data-trailer-modal]"),modalInfo:document.querySelector(".trailer-video")}),u=new(0,s.FilmAPI);function m(e){return p.apply(this,arguments)}function p(){return(p=e(o)(e(c).mark((function t(n){var r,a,o,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.getFilmVideo(n);case 3:r=e.sent,a=r.results,console.log(a),a.length&&(o=a[0].key,i='\n        <iframe class="modal_trailer-video" src="https://www.youtube.com/embed/'.concat(o,'" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n        '),d.modalInfo.innerHTML=i,d.modal.classList.remove("is-hidden"),d.closeModalBtn.addEventListener("click",f)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}function f(){d.modal.classList.add("is-hidden"),document.removeEventListener("keydown",v),document.removeEventListener("click",h),d.modalInfo.innerHTML=""}function h(e){e.target===e.currentTarget&&f()}function v(e){"Escape"!==e.code||d.modal.contains("is-hidden")||f()}o=a("bpxeT"),c=a("2TvXO"),o=a("bpxeT"),i=a("8nrFW"),c=a("2TvXO");var g=a("dIxxU"),x=(s=a("f8mqk"),[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}]),b=(new(0,s.FilmAPI),document.querySelector(".cards__list"));function y(){return w.apply(this,arguments)}function w(){return w=e(o)(e(c).mark((function t(){var n,r,a=arguments;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:1,e.next=3,g.default.get("https://api.themoviedb.org/3/trending/movie/week?api_key=2963fc82afd3cb57f64d050a1ba5935c&page=".concat(n));case 3:return r=e.sent.data,console.log(r),e.abrupt("return",r.results);case 6:case"end":return e.stop()}}),t)}))),w.apply(this,arguments)}function _(t){var n=t.map((function(t){return'<li class="cards__item" data-id='.concat(t.id,'> \n          <img \n            class="cards__photo" \n            alt="film" \n            src="https://image.tmdb.org/t/p/w500').concat(t.poster_path,'" \n            width="280" \n            loading="lazy" \n          /> \n          <h3 class="cards__title">').concat(t.title,'</h3> \n          <p class="cards__info">').concat((n=x,r=t.genre_ids,a=n.reduce((function(t,n){return r.includes(n.id)?e(i)(t).concat([n.name]):t}),[]),a.length>2?a.slice(0,2)+",Other":a)," | ").concat(t.release_date,'</p> \n          <p class="rating">').concat(t.vote_average.toFixed(1),"</p>\n        </li>");var n,r,a})).join("");return b.insertAdjacentHTML("beforeend",n),n}function q(){return(q=e(o)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y();case 3:_(e.sent),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){q.apply(this,arguments)}();var L=document.querySelector('[data-index="1"]'),C=document.querySelector('[data-index="2"]'),k=document.querySelector('[data-index="3"]'),S=document.querySelector('[data-index="4"]'),T=document.querySelector('[data-index="5"]'),E=document.querySelector(".first-button"),M=document.querySelector(".last-button"),N=document.querySelector(".pagination-container"),F=document.querySelector(".arrow-right"),H=document.querySelector(".arrow-left"),B=document.querySelector("#previous"),V=document.querySelector("#after");N.addEventListener("click",(function(e){"BUTTON"===e.target.tagName&&(Number(e.target.textContent)&&(I=Number(e.target.textContent)),B.hidden=!0,V.hidden=!0,e.target.classList.contains("pagination-button")&&(O.forEach((function(e){return e.classList.remove("pagination--current")})),e.target.classList.add("pagination--current")),e.target.classList.contains("arrow-right")&&I<1e3&&(O.forEach((function(e){return e.classList.remove("pagination--current")})),L.classList.add("pagination--current"),L.textContent=Number(L.textContent)+5,C.textContent=Number(C.textContent)+5,k.textContent=Number(k.textContent)+5,S.textContent=Number(S.textContent)+5,T.textContent=Number(T.textContent)+5,I=L.textContent),e.target.classList.contains("arrow-left")&&I>=5&&(O.forEach((function(e){return e.classList.remove("pagination--current")})),L.textContent=Number(L.textContent)-5,C.textContent=Number(C.textContent)-5,k.textContent=Number(k.textContent)-5,S.textContent=Number(S.textContent)-5,T.textContent=Number(T.textContent)-5,T.classList.add("pagination--current"),I=T.textContent),e.target.classList.contains("first-button")&&(O.forEach((function(e){return e.classList.remove("pagination--current")})),L.textContent=1,C.textContent=2,k.textContent=3,S.textContent=4,T.textContent=5,L.classList.add("pagination--current"),I=L.textContent,H.hidden=!0,B.hidden=!0,E.hidden=!0),e.target.classList.contains("last-button")&&(O.forEach((function(e){return e.classList.remove("pagination--current")})),L.textContent=Number(M.textContent)-4,C.textContent=Number(M.textContent)-3,k.textContent=Number(M.textContent)-2,S.textContent=Number(M.textContent)-1,T.textContent=M.textContent,T.classList.add("pagination--current"),I=T.textContent,F.hidden=!0,V.hidden=!0,M.hidden=!0),Number(I)>5?(H.hidden=!1,B.hidden=!1,E.hidden=!1):(H.hidden=!0,B.hidden=!0,E.hidden=!0),Number(I)<996&&(F.hidden=!1,V.hidden=!1,M.hidden=!1),window.scrollTo({top:0,behavior:"smooth"}),y(I).then((function(e){b.innerHTML=_(e),console.log(e)})))}));var I=1,O=document.querySelectorAll(".pagination-button");B.hidden=!0,H.hidden=!0,E.hidden=!0;var A=new(0,(s=a("f8mqk")).FilmAPI);function W(e){return z.apply(this,arguments)}function z(){return(z=e(o)(e(c).mark((function t(n){var r,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(n),r=n.target.dataset.modalWatchedId,console.log(r),e.prev=4,e.next=7,A.getFilmDetails(r);case 7:if(a=e.sent,console.log(a),!(o=JSON.parse(localStorage.getItem("watched"))||[]).some((function(e){return e.id===+r}))){e.next=13;break}return console.log("qwe"),e.abrupt("return");case 13:o.push(a),localStorage.setItem("watched",JSON.stringify(o)),l.watchedBtn.textContent="Remove from watched",e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),console.log(e.t0);case 21:case"end":return e.stop()}}),t,null,[[4,18]])})))).apply(this,arguments)}function D(e){return P.apply(this,arguments)}function P(){return(P=e(o)(e(c).mark((function t(n){var r,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(n),r=n.target.dataset.modalQueueId,console.log(r),e.prev=4,e.next=7,A.getFilmDetails(r);case 7:if(a=e.sent,console.log(a),!(o=JSON.parse(localStorage.getItem("queue"))||[]).some((function(e){return e.id===+r}))){e.next=13;break}return console.log("qwe"),e.abrupt("return");case 13:o.push(a),localStorage.setItem("queue",JSON.stringify(o)),l.queueBtn.textContent="Remove from queue",e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),console.log(e.t0);case 21:case"end":return e.stop()}}),t,null,[[4,18]])})))).apply(this,arguments)}var R=new(0,s.FilmAPI),X=document.querySelector(".backdrop__modal-film"),J=document.querySelector("#modal-close-button"),U=document.querySelector(".modal-film__info");function j(){return(j=e(o)(e(c).mark((function t(n){var r,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.target.closest("[data-id]")){e.next=2;break}return e.abrupt("return");case 2:return r=n.target.closest("li").dataset.id,e.next=5,R.getFilmDetails(r);case 5:a=e.sent,console.log(a),Z(a),(l.openTrailerFilm=document.querySelector("[data-modal-trailer]")).addEventListener("click",(function(){m(r)})),l.watchedBtn=document.querySelector("[data-modal-watched-id]"),l.queueBtn=document.querySelector("[data-modal-queue-id]"),console.log(l.queueBtn),l.watchedBtn.addEventListener("click",W),l.queueBtn.addEventListener("click",D),X.classList.remove("is-hidden"),window.addEventListener("click",K),window.addEventListener("keydown",Q),J.addEventListener("click",G);case 19:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function G(){X.classList.add("is-hidden"),U.innerHTML="",Y()}function Q(e){"Escape"===e.code&&(X.classList.add("is-hidden"),U.innerHTML="",Y())}function K(e){e.target===e.currentTarget&&(X.classList.add("is-hidden"),U.innerHTML="",Y())}function Y(){window.removeEventListener("keydown",Q),window.removeEventListener("click",K),J.removeEventListener("click",G)}function Z(t){var n=t.title,r=t.vote_average,a=t.vote_count,o=t.popularity,c=t.original_title,s=t.overview,l=t.genres,d=t.poster_path,u=t.id,m=l.map((function(e){return e.name})),p='\n        <div class="film-card">\n            <div class="film-card__img">\n            <img class="film-card__picture" src="https://image.tmdb.org/t/p/w500'.concat(d,'" alt="').concat(n,'" width="375">\n            </div>\n            <div class="film-card__info">\n            <h2 class="film-card__title">').concat(n,'</h2>\n            <div class="film-card__general-info">\n                <ul class="info-list">\n                <li class="info">\n                <p class="info-item">Vote/Votes</p>\n                <p class="info-result"><span class="accent-vote">').concat(r.toFixed(1),"</span>/").concat(a,'</p>\n                </li>\n                <li class="info">\n                <p class="info-item">Popularity</p>\n                <p class="info-result">').concat(o.toFixed(1),'</p>\n                </li>\n                <li class="info">\n                <p class="info-item">Original Title</p>\n                <p class="info-result  to-up">').concat(c,'</p>\n                </li>\n                <li class="info">\n                <p class="info-item">Genre</p>\n                <p class="info-result">').concat(e(i)(m),'</p>\n                </li>\n                </ul>\n            </div>\n            <p class="film-card__overview-title">About</p>\n            <p class="film-card__overview">').concat(s,'</p>\n            <div class="modal-film__buttons-block">\n                <button type="submit" class="btn-watched button" data-modal-watched-id=').concat(u,'>\n        Add to watched</button>\n                <button type="submit" class="btn-queue button" data-modal-queue-id=').concat(u,'>\n        Add to queue</button>\n                <button type="submit" class="btn-trailer button" data-modal-trailer><span></span>\n        <span></span>\n        <span></span>\n        <span></span>Watch trailer</button>\n            </div>\n            </div>\n        </div>\n    ');return U.innerHTML=p,p}l.cardsListEl.addEventListener("click",(function(e){return j.apply(this,arguments)}));o=a("bpxeT"),c=a("2TvXO");var $,ee=new(0,(s=a("f8mqk")).FilmAPI),te=document.querySelector(".pagination-container"),ne=document.querySelector(".footer"),re=document.querySelector("body"),ae=($=e(o)(e(c).mark((function t(n){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),ee.searchQuery=n.target.elements.query.value.trim(),ee.page=1,l.formWarning.textContent="",e.prev=4,e.next=7,ee.getFilmsByName();case 7:if((r=e.sent).results.length){e.next=18;break}return setTimeout((function(){console.log("hi"),l.formWarning.classList.add("is-hidden")}),1e4),l.formWarning.classList.remove("is-hidden"),n.target.reset(),l.formWarning.textContent=ie(),l.cardsListEl.innerHTML=ce,te.style.display="none",ne.style.display="none",re.style.backgroundColor="black",e.abrupt("return");case 18:l.cardsListEl.innerHTML=_(r.results),n.target.reset(),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),console.log(e.t0);case 25:case"end":return e.stop()}}),t,null,[[4,22]])}))),function(e){return $.apply(this,arguments)});l.searchForm.addEventListener("submit",ae);var oe=["Search result not successful. Enter the correct movie name and try again."];function ie(){var e=0,t=0,n="",r=document.querySelector(".header-form__warning");!function a(){var o,i=setTimeout((function(){if(n+=oe[e][t],r.innerHTML=n+"|",++t>=oe[e].length&&(t=0,++e===oe.length))return clearTimeout(i),r.innerHTML=n,!0;a()}),(o=100,Math.floor(Math.random()*Math.floor(o))))}()}function ce(){return'<div class="error"></div>\n<svg id="svgWrap_2" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 700 250">\n    <g>\n        <path id="id3_2"\n            d="M195.7 232.67h-37.1V149.7H27.76c-2.64 0-5.1-.5-7.36-1.49-2.27-.99-4.23-2.31-5.88-3.96-1.65-1.65-2.95-3.61-3.89-5.88s-1.42-4.67-1.42-7.22V29.62h36.82v82.98H158.6V29.62h37.1v203.05z" />\n        <path id="id2_2"\n            d="M470.69 147.71c0 8.31-1.06 16.17-3.19 23.58-2.12 7.41-5.12 14.28-8.99 20.6-3.87 6.33-8.45 11.99-13.74 16.99-5.29 5-11.07 9.28-17.35 12.81a85.146 85.146 0 0 1-20.04 8.14 83.637 83.637 0 0 1-21.67 2.83H319.3c-7.46 0-14.73-.94-21.81-2.83-7.08-1.89-13.76-4.6-20.04-8.14a88.292 88.292 0 0 1-17.35-12.81c-5.29-5-9.84-10.67-13.66-16.99-3.82-6.32-6.8-13.19-8.92-20.6-2.12-7.41-3.19-15.27-3.19-23.58v-33.13c0-12.46 2.34-23.88 7.01-34.27 4.67-10.38 10.92-19.33 18.76-26.83 7.83-7.5 16.87-13.36 27.12-17.56 10.24-4.2 20.93-6.3 32.07-6.3h66.41c7.36 0 14.58.94 21.67 2.83 7.08 1.89 13.76 4.6 20.04 8.14a88.292 88.292 0 0 1 17.35 12.81c5.29 5 9.86 10.67 13.74 16.99 3.87 6.33 6.87 13.19 8.99 20.6 2.13 7.41 3.19 15.27 3.19 23.58v33.14zm-37.1-33.13c0-7.27-1.32-13.88-3.96-19.82-2.64-5.95-6.16-11.04-10.55-15.29-4.39-4.25-9.46-7.5-15.22-9.77-5.76-2.27-11.8-3.35-18.13-3.26h-66.41c-6.14-.09-12.11.97-17.91 3.19-5.81 2.22-10.95 5.43-15.44 9.63-4.48 4.2-8.07 9.3-10.76 15.29-2.69 6-4.04 12.67-4.04 20.04v33.13c0 7.36 1.32 14.02 3.96 19.97 2.64 5.95 6.18 11.02 10.62 15.22 4.44 4.2 9.56 7.43 15.36 9.7 5.8 2.27 11.87 3.35 18.2 3.26h66.41c7.27 0 13.85-1.2 19.75-3.61s10.93-5.73 15.08-9.98 7.36-9.32 9.63-15.22c2.27-5.9 3.4-12.34 3.4-19.33v-33.15zm-16-26.91a17.89 17.89 0 0 1 2.83 6.73c.47 2.41.47 4.77 0 7.08-.47 2.31-1.39 4.48-2.76 6.51-1.37 2.03-3.14 3.75-5.31 5.17l-99.4 66.41c-1.61 1.23-3.26 2.08-4.96 2.55-1.7.47-3.45.71-5.24.71-3.02 0-5.9-.71-8.64-2.12-2.74-1.42-4.96-3.44-6.66-6.09a17.89 17.89 0 0 1-2.83-6.73c-.47-2.41-.5-4.77-.07-7.08.43-2.31 1.3-4.48 2.62-6.51 1.32-2.03 3.07-3.75 5.24-5.17l99.69-66.41a17.89 17.89 0 0 1 6.73-2.83c2.41-.47 4.77-.47 7.08 0 2.31.47 4.48 1.37 6.51 2.69 2.03 1.32 3.75 3.02 5.17 5.09z" />\n        <path id="id1_2"\n            d="M688.33 232.67h-37.1V149.7H520.39c-2.64 0-5.1-.5-7.36-1.49-2.27-.99-4.23-2.31-5.88-3.96-1.65-1.65-2.95-3.61-3.89-5.88s-1.42-4.67-1.42-7.22V29.62h36.82v82.98h112.57V29.62h37.1v203.05z" />\n    </g>\n</svg>\n<svg id="svgWrap_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 700 250">\n    <g>\n        <path id="id3_1"\n            d="M195.7 232.67h-37.1V149.7H27.76c-2.64 0-5.1-.5-7.36-1.49-2.27-.99-4.23-2.31-5.88-3.96-1.65-1.65-2.95-3.61-3.89-5.88s-1.42-4.67-1.42-7.22V29.62h36.82v82.98H158.6V29.62h37.1v203.05z" />\n        <path id="id2_1"\n            d="M470.69 147.71c0 8.31-1.06 16.17-3.19 23.58-2.12 7.41-5.12 14.28-8.99 20.6-3.87 6.33-8.45 11.99-13.74 16.99-5.29 5-11.07 9.28-17.35 12.81a85.146 85.146 0 0 1-20.04 8.14 83.637 83.637 0 0 1-21.67 2.83H319.3c-7.46 0-14.73-.94-21.81-2.83-7.08-1.89-13.76-4.6-20.04-8.14a88.292 88.292 0 0 1-17.35-12.81c-5.29-5-9.84-10.67-13.66-16.99-3.82-6.32-6.8-13.19-8.92-20.6-2.12-7.41-3.19-15.27-3.19-23.58v-33.13c0-12.46 2.34-23.88 7.01-34.27 4.67-10.38 10.92-19.33 18.76-26.83 7.83-7.5 16.87-13.36 27.12-17.56 10.24-4.2 20.93-6.3 32.07-6.3h66.41c7.36 0 14.58.94 21.67 2.83 7.08 1.89 13.76 4.6 20.04 8.14a88.292 88.292 0 0 1 17.35 12.81c5.29 5 9.86 10.67 13.74 16.99 3.87 6.33 6.87 13.19 8.99 20.6 2.13 7.41 3.19 15.27 3.19 23.58v33.14zm-37.1-33.13c0-7.27-1.32-13.88-3.96-19.82-2.64-5.95-6.16-11.04-10.55-15.29-4.39-4.25-9.46-7.5-15.22-9.77-5.76-2.27-11.8-3.35-18.13-3.26h-66.41c-6.14-.09-12.11.97-17.91 3.19-5.81 2.22-10.95 5.43-15.44 9.63-4.48 4.2-8.07 9.3-10.76 15.29-2.69 6-4.04 12.67-4.04 20.04v33.13c0 7.36 1.32 14.02 3.96 19.97 2.64 5.95 6.18 11.02 10.62 15.22 4.44 4.2 9.56 7.43 15.36 9.7 5.8 2.27 11.87 3.35 18.2 3.26h66.41c7.27 0 13.85-1.2 19.75-3.61s10.93-5.73 15.08-9.98 7.36-9.32 9.63-15.22c2.27-5.9 3.4-12.34 3.4-19.33v-33.15zm-16-26.91a17.89 17.89 0 0 1 2.83 6.73c.47 2.41.47 4.77 0 7.08-.47 2.31-1.39 4.48-2.76 6.51-1.37 2.03-3.14 3.75-5.31 5.17l-99.4 66.41c-1.61 1.23-3.26 2.08-4.96 2.55-1.7.47-3.45.71-5.24.71-3.02 0-5.9-.71-8.64-2.12-2.74-1.42-4.96-3.44-6.66-6.09a17.89 17.89 0 0 1-2.83-6.73c-.47-2.41-.5-4.77-.07-7.08.43-2.31 1.3-4.48 2.62-6.51 1.32-2.03 3.07-3.75 5.24-5.17l99.69-66.41a17.89 17.89 0 0 1 6.73-2.83c2.41-.47 4.77-.47 7.08 0 2.31.47 4.48 1.37 6.51 2.69 2.03 1.32 3.75 3.02 5.17 5.09z" />\n        <path id="id1_1"\n            d="M688.33 232.67h-37.1V149.7H520.39c-2.64 0-5.1-.5-7.36-1.49-2.27-.99-4.23-2.31-5.88-3.96-1.65-1.65-2.95-3.61-3.89-5.88s-1.42-4.67-1.42-7.22V29.62h36.82v82.98h112.57V29.62h37.1v203.05z" />\n    </g>\n</svg>\n\n<svg>\n    <defs>\n        <filter id="glow">\n            <fegaussianblur class="blur" result="coloredBlur" stddeviation="4"></fegaussianblur>\n            <femerge>\n                <femergenode in="coloredBlur"></femergenode>\n                <femergenode in="SourceGraphic"></femergenode>\n            </femerge>\n        </filter>\n    </defs>\n</svg>\n\n<h4 class="error-message">Page Not Found\n<a href="./index.html" class="button btn-err">Go Back</a>\n</h4>\n'}ie(),a("4F07H")}();
//# sourceMappingURL=index.166c8b09.js.map
