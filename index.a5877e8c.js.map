{"mappings":"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","sources":["src/js/main-modal.js","src/js/searchfield.js"],"sourcesContent":["import {FilmAPI} from './FilmAPI.js'\nimport { refs } from './refs.js';\nimport { onOpenVideo } from './trailer.js';\nimport { onWatchedBtnClick, onQueueBtnClick } from './localStorage.js';\nconst filmApi= new FilmAPI();\nconst modalBackdrop = document.querySelector('.backdrop__modal-film');\nconst buttonCloseModal = document.querySelector('#modal-close-button');\nconst modalCardInfo = document.querySelector('.modal-film__info');\n// console.log(onQueueBtnClick);\n\nrefs.cardsListEl.addEventListener('click', onOpenModal);\n\nasync function onOpenModal(event) {\n  if (!event.target.closest('[data-id]')) {\n    return;\n  }\n \n  const currentCardId = event.target.closest('li').dataset.id;\n    const movieRes = await filmApi.getFilmDetails(currentCardId);\n    console.log(movieRes)\n  createMovieCard(movieRes);\n\n  refs.openTrailerFilm = document.querySelector('[data-modal-trailer]');\n  refs.openTrailerFilm.addEventListener('click', () => {\n    onOpenVideo(currentCardId);\n  });\n  refs.watchedBtn = document.querySelector('[data-modal-watched-id]')\n  refs.queueBtn = document.querySelector('[data-modal-queue-id]')\n console.log(refs.queueBtn);\n  refs.watchedBtn.addEventListener('click', onWatchedBtnClick);\n  refs.queueBtn.addEventListener('click', onQueueBtnClick);\n  \n  modalBackdrop.classList.remove('is-hidden');\n  window.addEventListener('click', closeModalbyBackdrop);\n  window.addEventListener('keydown', onKeyClick);\n  buttonCloseModal.addEventListener('click', closeModalbyCross);\n\n}\n\nfunction closeModalbyCross() {\n  modalBackdrop.classList.add('is-hidden');\n  modalCardInfo.innerHTML = '';\n  clearBackdropListeners();\n}\n\nfunction onKeyClick(event) {\n  if (event.code !== 'Escape') {\n    return;\n  }\n  modalBackdrop.classList.add('is-hidden');\n  modalCardInfo.innerHTML = '';\n  clearBackdropListeners();\n}\n\nfunction closeModalbyBackdrop(event) {\n  if (event.target === event.currentTarget) {\n    modalBackdrop.classList.add('is-hidden');\n    modalCardInfo.innerHTML = '';\n    clearBackdropListeners();\n  }\n}\n\nfunction clearBackdropListeners() {\n  window.removeEventListener('keydown', onKeyClick);\n  window.removeEventListener('click', closeModalbyBackdrop);\n  buttonCloseModal.removeEventListener('click', closeModalbyCross);\n}\n\nfunction createMovieCard(obj) {\n  const {\n    title,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    overview,\n    genres,\n    poster_path,\n    id\n  } = obj;\n  const genresArr = genres.map(el => el.name);\n  \n  const markupModal = `\n        <div class=\"film-card\">\n            <div class=\"film-card__img\">\n            <img class=\"film-card__picture\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${title}\" width=\"375\">\n            </div>\n            <div class=\"film-card__info\">\n            <h2 class=\"film-card__title\">${title}</h2>\n            <div class=\"film-card__general-info\">\n                <ul class=\"info-list\">\n                <li class=\"info\">\n                <p class=\"info-item\">Vote/Votes</p>\n                <p class=\"info-result\"><span class=\"accent-vote\">${vote_average.toFixed(1)}</span>/${vote_count}</p>\n                </li>\n                <li class=\"info\">\n                <p class=\"info-item\">Popularity</p>\n                <p class=\"info-result\">${popularity.toFixed(1)}</p>\n                </li>\n                <li class=\"info\">\n                <p class=\"info-item\">Original Title</p>\n                <p class=\"info-result  to-up\">${original_title}</p>\n                </li>\n                <li class=\"info\">\n                <p class=\"info-item\">Genre</p>\n                <p class=\"info-result\">${[...genresArr]}</p>\n                </li>\n                </ul>\n            </div>\n            <p class=\"film-card__overview-title\">About</p>\n            <p class=\"film-card__overview\">${overview}</p>\n            <div class=\"modal-film__buttons-block\">\n                <button type=\"submit\" class=\"btn-watched button\" data-modal-watched-id=${id}>\n        Add to watched</button>\n                <button type=\"submit\" class=\"btn-queue button\" data-modal-queue-id=${id}>\n        Add to queue</button>\n                <button type=\"submit\" class=\"btn-trailer button\" data-modal-trailer><span></span>\n        <span></span>\n        <span></span>\n        <span></span>Watch trailer</button>\n            </div>\n            </div>\n        </div>\n    `;\n  modalCardInfo.innerHTML = markupModal;\n    return markupModal;\n}","'use strict';\nimport { FilmAPI } from './FilmAPI';\nimport { refs } from './refs';\nimport { renderMarkup } from './pagination.js';\nimport {toTop} from './up.js';\n\nconst filmApi = new FilmAPI();\nconst paginationRef = document.querySelector('.pagination-container'); \nconst footer = document.querySelector('.footer');\nconst body = document.querySelector('body')\n\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n\n  filmApi.searchQuery = event.target.elements.query.value.trim();\n  filmApi.page = 1;\n  refs.formWarning.textContent = '';\n\n  try {\n    const data = await filmApi.getFilmsByName();\n    \n\n    if (!data.results.length) {\n        setTimeout(() => {\n            console.log('hi');\n        refs.formWarning.classList.add('is-hidden');\n      }, 10000);\n      refs.formWarning.classList.remove('is-hidden');\n      event.target.reset();\n      refs.formWarning.textContent =\n        typeText();\n      refs.cardsListEl.innerHTML = errorBanner;\n      toTop.style.visibility='hidden';\n      paginationRef.style.display = 'none';\n      footer.style.display = 'none';\n      body.style.backgroundColor = 'black';\n      return;\n    }\n    \n    refs.cardsListEl.innerHTML = renderMarkup(data.results);\n    event.target.reset();\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nrefs.searchForm.addEventListener('submit', onSearchFormSubmit);\n\nconst t = [\n    'Search result not successful. Enter the correct movie name and try again.'\n];\n\nfunction typeText() {\n    let line = 0;\n    let count = 0;\n    let out = '';\n    let htmlOut = document.querySelector('.header-form__warning');\n\n    function typeLine() {\n        \n        let interval = setTimeout(function () {\n            out += t[line][count];\n            htmlOut.innerHTML = out + '|';\n            count++;\n            \n            if (count >= t[line].length) {\n                count = 0;\n                line++;\n\n                if (line === t.length) {\n                    clearTimeout(interval);\n                    htmlOut.innerHTML = out;\n                    return true;\n                }\n            }\n            typeLine();\n            \n        }, getRandomInt(100)) \n       \n    }\n\n    typeLine();\n    \n}\n\n\nfunction getRandomInt(max) {\n    return Math.floor(Math.random() * Math.floor(max));\n}\n\ntypeText();\n\nfunction errorBanner() {\n  return `<div class=\"error\"></div>\n<svg id=\"svgWrap_2\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 700 250\">\n    <g>\n        <path id=\"id3_2\"\n            d=\"M195.7 232.67h-37.1V149.7H27.76c-2.64 0-5.1-.5-7.36-1.49-2.27-.99-4.23-2.31-5.88-3.96-1.65-1.65-2.95-3.61-3.89-5.88s-1.42-4.67-1.42-7.22V29.62h36.82v82.98H158.6V29.62h37.1v203.05z\" />\n        <path id=\"id2_2\"\n            d=\"M470.69 147.71c0 8.31-1.06 16.17-3.19 23.58-2.12 7.41-5.12 14.28-8.99 20.6-3.87 6.33-8.45 11.99-13.74 16.99-5.29 5-11.07 9.28-17.35 12.81a85.146 85.146 0 0 1-20.04 8.14 83.637 83.637 0 0 1-21.67 2.83H319.3c-7.46 0-14.73-.94-21.81-2.83-7.08-1.89-13.76-4.6-20.04-8.14a88.292 88.292 0 0 1-17.35-12.81c-5.29-5-9.84-10.67-13.66-16.99-3.82-6.32-6.8-13.19-8.92-20.6-2.12-7.41-3.19-15.27-3.19-23.58v-33.13c0-12.46 2.34-23.88 7.01-34.27 4.67-10.38 10.92-19.33 18.76-26.83 7.83-7.5 16.87-13.36 27.12-17.56 10.24-4.2 20.93-6.3 32.07-6.3h66.41c7.36 0 14.58.94 21.67 2.83 7.08 1.89 13.76 4.6 20.04 8.14a88.292 88.292 0 0 1 17.35 12.81c5.29 5 9.86 10.67 13.74 16.99 3.87 6.33 6.87 13.19 8.99 20.6 2.13 7.41 3.19 15.27 3.19 23.58v33.14zm-37.1-33.13c0-7.27-1.32-13.88-3.96-19.82-2.64-5.95-6.16-11.04-10.55-15.29-4.39-4.25-9.46-7.5-15.22-9.77-5.76-2.27-11.8-3.35-18.13-3.26h-66.41c-6.14-.09-12.11.97-17.91 3.19-5.81 2.22-10.95 5.43-15.44 9.63-4.48 4.2-8.07 9.3-10.76 15.29-2.69 6-4.04 12.67-4.04 20.04v33.13c0 7.36 1.32 14.02 3.96 19.97 2.64 5.95 6.18 11.02 10.62 15.22 4.44 4.2 9.56 7.43 15.36 9.7 5.8 2.27 11.87 3.35 18.2 3.26h66.41c7.27 0 13.85-1.2 19.75-3.61s10.93-5.73 15.08-9.98 7.36-9.32 9.63-15.22c2.27-5.9 3.4-12.34 3.4-19.33v-33.15zm-16-26.91a17.89 17.89 0 0 1 2.83 6.73c.47 2.41.47 4.77 0 7.08-.47 2.31-1.39 4.48-2.76 6.51-1.37 2.03-3.14 3.75-5.31 5.17l-99.4 66.41c-1.61 1.23-3.26 2.08-4.96 2.55-1.7.47-3.45.71-5.24.71-3.02 0-5.9-.71-8.64-2.12-2.74-1.42-4.96-3.44-6.66-6.09a17.89 17.89 0 0 1-2.83-6.73c-.47-2.41-.5-4.77-.07-7.08.43-2.31 1.3-4.48 2.62-6.51 1.32-2.03 3.07-3.75 5.24-5.17l99.69-66.41a17.89 17.89 0 0 1 6.73-2.83c2.41-.47 4.77-.47 7.08 0 2.31.47 4.48 1.37 6.51 2.69 2.03 1.32 3.75 3.02 5.17 5.09z\" />\n        <path id=\"id1_2\"\n            d=\"M688.33 232.67h-37.1V149.7H520.39c-2.64 0-5.1-.5-7.36-1.49-2.27-.99-4.23-2.31-5.88-3.96-1.65-1.65-2.95-3.61-3.89-5.88s-1.42-4.67-1.42-7.22V29.62h36.82v82.98h112.57V29.62h37.1v203.05z\" />\n    </g>\n</svg>\n<svg id=\"svgWrap_1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 700 250\">\n    <g>\n        <path id=\"id3_1\"\n            d=\"M195.7 232.67h-37.1V149.7H27.76c-2.64 0-5.1-.5-7.36-1.49-2.27-.99-4.23-2.31-5.88-3.96-1.65-1.65-2.95-3.61-3.89-5.88s-1.42-4.67-1.42-7.22V29.62h36.82v82.98H158.6V29.62h37.1v203.05z\" />\n        <path id=\"id2_1\"\n            d=\"M470.69 147.71c0 8.31-1.06 16.17-3.19 23.58-2.12 7.41-5.12 14.28-8.99 20.6-3.87 6.33-8.45 11.99-13.74 16.99-5.29 5-11.07 9.28-17.35 12.81a85.146 85.146 0 0 1-20.04 8.14 83.637 83.637 0 0 1-21.67 2.83H319.3c-7.46 0-14.73-.94-21.81-2.83-7.08-1.89-13.76-4.6-20.04-8.14a88.292 88.292 0 0 1-17.35-12.81c-5.29-5-9.84-10.67-13.66-16.99-3.82-6.32-6.8-13.19-8.92-20.6-2.12-7.41-3.19-15.27-3.19-23.58v-33.13c0-12.46 2.34-23.88 7.01-34.27 4.67-10.38 10.92-19.33 18.76-26.83 7.83-7.5 16.87-13.36 27.12-17.56 10.24-4.2 20.93-6.3 32.07-6.3h66.41c7.36 0 14.58.94 21.67 2.83 7.08 1.89 13.76 4.6 20.04 8.14a88.292 88.292 0 0 1 17.35 12.81c5.29 5 9.86 10.67 13.74 16.99 3.87 6.33 6.87 13.19 8.99 20.6 2.13 7.41 3.19 15.27 3.19 23.58v33.14zm-37.1-33.13c0-7.27-1.32-13.88-3.96-19.82-2.64-5.95-6.16-11.04-10.55-15.29-4.39-4.25-9.46-7.5-15.22-9.77-5.76-2.27-11.8-3.35-18.13-3.26h-66.41c-6.14-.09-12.11.97-17.91 3.19-5.81 2.22-10.95 5.43-15.44 9.63-4.48 4.2-8.07 9.3-10.76 15.29-2.69 6-4.04 12.67-4.04 20.04v33.13c0 7.36 1.32 14.02 3.96 19.97 2.64 5.95 6.18 11.02 10.62 15.22 4.44 4.2 9.56 7.43 15.36 9.7 5.8 2.27 11.87 3.35 18.2 3.26h66.41c7.27 0 13.85-1.2 19.75-3.61s10.93-5.73 15.08-9.98 7.36-9.32 9.63-15.22c2.27-5.9 3.4-12.34 3.4-19.33v-33.15zm-16-26.91a17.89 17.89 0 0 1 2.83 6.73c.47 2.41.47 4.77 0 7.08-.47 2.31-1.39 4.48-2.76 6.51-1.37 2.03-3.14 3.75-5.31 5.17l-99.4 66.41c-1.61 1.23-3.26 2.08-4.96 2.55-1.7.47-3.45.71-5.24.71-3.02 0-5.9-.71-8.64-2.12-2.74-1.42-4.96-3.44-6.66-6.09a17.89 17.89 0 0 1-2.83-6.73c-.47-2.41-.5-4.77-.07-7.08.43-2.31 1.3-4.48 2.62-6.51 1.32-2.03 3.07-3.75 5.24-5.17l99.69-66.41a17.89 17.89 0 0 1 6.73-2.83c2.41-.47 4.77-.47 7.08 0 2.31.47 4.48 1.37 6.51 2.69 2.03 1.32 3.75 3.02 5.17 5.09z\" />\n        <path id=\"id1_1\"\n            d=\"M688.33 232.67h-37.1V149.7H520.39c-2.64 0-5.1-.5-7.36-1.49-2.27-.99-4.23-2.31-5.88-3.96-1.65-1.65-2.95-3.61-3.89-5.88s-1.42-4.67-1.42-7.22V29.62h36.82v82.98h112.57V29.62h37.1v203.05z\" />\n    </g>\n</svg>\n\n<svg>\n    <defs>\n        <filter id=\"glow\">\n            <fegaussianblur class=\"blur\" result=\"coloredBlur\" stddeviation=\"4\"></fegaussianblur>\n            <femerge>\n                <femergenode in=\"coloredBlur\"></femergenode>\n                <femergenode in=\"SourceGraphic\"></femergenode>\n            </femerge>\n        </filter>\n    </defs>\n</svg>\n\n<h4 class=\"error-message\">Page Not Found\n<a href=\"./index.html\" class=\"button btn-err\">Go Back</a>\n</h4>\n`\n}\n\n"],"names":["$hv3Jw","parcelRequire","$7ca8b6fe03f40de6$var$filmApi","FilmAPI","$7ca8b6fe03f40de6$var$modalBackdrop","document","querySelector","$7ca8b6fe03f40de6$var$buttonCloseModal","$7ca8b6fe03f40de6$var$modalCardInfo","$7ca8b6fe03f40de6$var$closeModalbyCross","classList","add","innerHTML","$7ca8b6fe03f40de6$var$clearBackdropListeners","$7ca8b6fe03f40de6$var$onKeyClick","event","code","$7ca8b6fe03f40de6$var$closeModalbyBackdrop","target","currentTarget","window","removeEventListener","$krGWQ","refs","cardsListEl","addEventListener","async","closest","currentCardId","dataset","id","movieRes","getFilmDetails","console","log","obj","title","vote_average","vote_count","popularity","original_title","overview","genres","poster_path","genresArr","map","el","name","markupModal","toFixed","$7ca8b6fe03f40de6$var$createMovieCard","openTrailerFilm","$37v9V","onOpenVideo","watchedBtn","queueBtn","$31u3U","onWatchedBtnClick","onQueueBtnClick","remove","$d0a167aabda10261$var$filmApi","$d0a167aabda10261$var$paginationRef","$d0a167aabda10261$var$footer","$d0a167aabda10261$var$body","searchForm","preventDefault","searchQuery","elements","query","value","trim","page","formWarning","textContent","data","getFilmsByName","results","length","setTimeout","reset","$d0a167aabda10261$var$typeText","$d0a167aabda10261$var$errorBanner","$ipUyS","toTop","style","visibility","display","backgroundColor","$2nhTy","renderMarkup","err","$d0a167aabda10261$var$t","line","count","out","htmlOut","typeLine","interval","clearTimeout","max","Math","floor","random"],"version":3,"file":"index.a5877e8c.js.map"}