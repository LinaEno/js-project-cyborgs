!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,t){i[e]=t},t.parcelRequired7c6=a),a("f8mqk"),a("kvC6y");var c={watchedBtnLib:document.querySelector("[data-lib-watched]"),queueBtnLib:document.querySelector("[data-lib-queue]"),filmLibList:document.querySelector(".film-list")};function o(e){console.log(e);var t=e.map((function(e){return'<li class="cards__item" data-id='.concat(e.id,'> \n          <img \n            class="cards__photo" \n            alt="film" \n            src="https://image.tmdb.org/t/p/w500').concat(e.poster_path,'" \n            width="395" \n            loading="lazy" \n          /> \n          <h3 class="cards__title">').concat(e.title,'</h3> \n          <p class="cards__info">').concat(e.genres.map((function(e){return e.name})).join(", ")," | ").concat(e.release_date,'</p> \n          <p class="rating">').concat(e.vote_average.toFixed(1),"</p>\n        </li>")})).join("");return c.filmLibList.innerHTML=t,t}function s(){var e=JSON.parse(localStorage.getItem("watched"))||[];e.length?(o(e),c.watchedBtnLib.classList.add("active"),c.queueBtnLib.classList.remove("active")):c.filmLibList.innerHTML="Not films"}function l(){var e=JSON.parse(localStorage.getItem("queue"))||[];e.length?(o(e),c.queueBtnLib.classList.add("active"),c.watchedBtnLib.classList.remove("active")):c.filmLibList.innerHTML="Not films"}c.watchedBtnLib.addEventListener("click",s),c.queueBtnLib.addEventListener("click",l),s(),l(),a("4F07H");var r=a("bpxeT"),d=a("8nrFW"),u=a("2TvXO"),m=a("f8mqk"),p=a("cDXQO"),f=a("UL92Z"),v=new(0,m.FilmAPI),L=document.querySelector(".backdrop__modal-film"),b=document.querySelector("#modal-close-button"),w=document.querySelector(".modal-film__info");function g(){return(g=e(r)(e(u).mark((function t(n){var i,a;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.target.closest("[data-id]")){e.next=2;break}return e.abrupt("return");case 2:return i=n.target.closest("li").dataset.id,e.next=5,v.getFilmDetails(i);case 5:a=e.sent,console.log(a),k(a),(c.openTrailerFilm=document.querySelector("[data-modal-trailer]")).addEventListener("click",(function(){(0,p.onOpenVideo)(i)})),c.watchedBtn=document.querySelector("[data-modal-watched-id]"),c.queueBtn=document.querySelector("[data-modal-queue-id]"),console.log(c.queueBtn),c.watchedBtn.addEventListener("click",f.onWatchedBtnClick),c.queueBtn.addEventListener("click",f.onQueueBtnClick),L.classList.remove("is-hidden"),window.addEventListener("click",q),window.addEventListener("keydown",_),b.addEventListener("click",h);case 19:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function h(){L.classList.add("is-hidden"),w.innerHTML="",y()}function _(e){"Escape"===e.code&&(L.classList.add("is-hidden"),w.innerHTML="",y())}function q(e){e.target===e.currentTarget&&(L.classList.add("is-hidden"),w.innerHTML="",y())}function y(){window.removeEventListener("keydown",_),window.removeEventListener("click",q),b.removeEventListener("click",h)}function k(t){var n=t.title,i=t.vote_average,a=t.vote_count,c=t.popularity,o=t.original_title,s=t.overview,l=t.genres,r=t.poster_path,u=t.id,m=JSON.parse(localStorage.getItem("watched"))||[],p=JSON.parse(localStorage.getItem("queue"))||[],f=m.some((function(e){return e.id===u})),v=p.some((function(e){return e.id===u})),L=l.map((function(e){return e.name})),b='\n        <div class="film-card">\n            <div class="film-card__img">\n            <img class="film-card__picture" src="https://image.tmdb.org/t/p/w500'.concat(r,'" alt="').concat(n,'" width="375">\n            </div>\n            <div class="film-card__info">\n            <h2 class="film-card__title">').concat(n,'</h2>\n            <div class="film-card__general-info">\n                <ul class="info-list">\n                <li class="info">\n                <p class="info-item">Vote/Votes</p>\n                <p class="info-result"><span class="accent-vote">').concat(i.toFixed(1),"</span>/").concat(a,'</p>\n                </li>\n                <li class="info">\n                <p class="info-item">Popularity</p>\n                <p class="info-result">').concat(c.toFixed(1),'</p>\n                </li>\n                <li class="info">\n                <p class="info-item">Original Title</p>\n                <p class="info-result  to-up">').concat(o,'</p>\n                </li>\n                <li class="info">\n                <p class="info-item">Genre</p>\n                <p class="info-result">').concat(e(d)(L),'</p>\n                </li>\n                </ul>\n            </div>\n            <p class="film-card__overview-title">About</p>\n            <p class="film-card__overview">').concat(s,'</p>\n            <div class="modal-film__buttons-block">\n                <button type="submit" class="btn-watched button" data-modal-watched-id=').concat(u,">\n        ").concat(f?"Remove from watched":"Add to watched",'</button>\n                <button type="submit" class="btn-queue button" data-modal-queue-id=').concat(u,">\n        ").concat(v?"Remove from queue":"Add to queue",'</button>\n                <button type="submit" class="btn-trailer button" data-modal-trailer><span></span>\n        <span></span>\n        <span></span>\n        <span></span>Watch trailer</button>\n            </div>\n            </div>\n        </div>\n    ');return w.innerHTML=b,b}c.filmLibList.addEventListener("click",(function(e){return g.apply(this,arguments)})),a("UL92Z"),a("cDXQO"),a("ajW5N")}();
//# sourceMappingURL=library.1f67a102.js.map
