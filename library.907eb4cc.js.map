{"mappings":"kpBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,KCnBTE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,8L,sBCAlD,MAAMC,EAAO,CAClBC,cAAeC,SAASC,cAAc,sBACtCC,YAAaF,SAASC,cAAc,oBACpCE,YAAaH,SAASC,cAAc,cACpCG,YAAaJ,SAASC,cAAc,uBCD/B,SAASI,EAAgBC,GAC9BC,QAAQC,IAAIF,GACZ,MAAMG,EAASH,EACZI,KAAIC,GACI,mCAAmCA,EAAKpB,sIAIHoB,EAAKC,2HAIlBD,EAAKE,iDACPF,EAAKG,OAAOJ,KAAI,EAACK,KAACA,KAAQA,IAAMC,KAAK,WAAWL,EAAKM,kDAC1DN,EAAKO,aAAaC,QAAQ,0BAGnDH,KAAK,IAER,OADAlB,EAAKK,YAAYiB,UAAUX,EACpBA,C,OCdT,SAASY,IACP,MAAMf,EAAQV,KAAKC,MAAMyB,aAAaC,QAAQ,aAAe,GACxDjB,EAAMhB,QAKXe,EAAgBC,GAChBR,EAAKC,cAAcyB,UAAUC,IAAI,UACjC3B,EAAKI,YAAYsB,UAAUE,OAAO,WANhC5B,EAAKK,YAAYiB,UAAY,kEACrBO,EAAAC,8B,CAQZ,SAASC,IACP,MAAMvB,EAAQV,KAAKC,MAAMyB,aAAaC,QAAQ,WAAa,GACtDjB,EAAMhB,QAKXwC,EACAzB,EAAgBC,GAChBR,EAAKI,YAAYsB,UAAUC,IAAI,UAC/B3B,EAAKC,cAAcyB,UAAUE,OAAO,WAPlC5B,EAAKK,YAAYiB,UAAY,mEACrBO,EAAAC,kC,CCxBZA,EAAiB,IAAAG,IAAoBrC,EAAA,SAAAsC,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,WDI5FtC,EAAKC,cAAcsC,iBAAiB,QAAShB,GAE7CvB,EAAKI,YAAYmC,iBAAiB,QAASR,GA2B3CR,IACAQ,I,WElCA,IAAAS,EAAA5C,EAAA,S,0BAIA,MAAM6C,EAAU,IAAI,EAAAD,EAAAE,SACdC,EAAgBzC,SAASC,cAAc,yBACvCyC,EAAmB1C,SAASC,cAAc,uBAC1C0C,EAAgB3C,SAASC,cAAc,qBA+B7C,SAAS2C,IACPH,EAAcjB,UAAUC,IAAI,aAC5BkB,EAAcvB,UAAY,GAC1ByB,G,CAGF,SAASC,EAAWC,GACC,WAAfA,EAAMC,OAGVP,EAAcjB,UAAUC,IAAI,aAC5BkB,EAAcvB,UAAY,GAC1ByB,I,CAGF,SAASI,EAAqBF,GACxBA,EAAMG,SAAWH,EAAMI,gBACzBV,EAAcjB,UAAUC,IAAI,aAC5BkB,EAAcvB,UAAY,GAC1ByB,I,CAIJ,SAASA,IACPO,OAAOC,oBAAoB,UAAWP,GACtCM,OAAOC,oBAAoB,QAASJ,GACpCP,EAAiBW,oBAAoB,QAAST,E,CAtDhD9C,EAAKK,YAAYkC,iBAAiB,SAElCiB,eAA2BP,GACzB,IAAKA,EAAMG,OAAOK,QAAQ,aACxB,OAGF,MAAMC,EAAgBT,EAAMG,OAAOK,QAAQ,MAAME,QAAQlE,GACnDmE,QAAiBnB,EAAQoB,eAAeH,GAC9CjD,QAAQC,IAAIkD,GAgDd,SAAyBE,GACvB,MAAM/C,MACJA,EAAKK,aACLA,EAAY2C,WACZA,EAAUC,WACVA,EAAUC,eACVA,EAAcC,SACdA,EAAQlD,OACRA,EAAMF,YACNA,EAAWrB,GACXA,GACEqE,EACEK,EAAerE,KAAKC,MAAMyB,aAAaC,QAAQ,aAAe,GAC9D2C,EAActE,KAAKC,MAAMyB,aAAaC,QAAQ,WAAa,GAC3D4C,EAAYF,EAAaG,MAAKzD,GAAQA,EAAKpB,KAAOA,IAElD8E,GADWH,EAAYE,MAAKzD,GAAQA,EAAKpB,KAAOA,IACpCuB,EAAOJ,KAAI4D,GAAMA,EAAGvD,QAEhCwD,EAAc,gKAG4D3D,WAAqBC,4HAG5DA,+PAKwBK,EAAaC,QAC9D,aACU0C,gKAIaC,EAAW3C,QAAQ,4KAIZ4C,2JAIP,IAAIM,oLAKAL,sJAE4CzE,kBACrF4E,EAAY,SAAW,oBAEjBA,EAAY,sBAAwB,+GACuC5E,mBACjFiF,SAAW,SAAW,oBAEhBA,SAAW,oBAAsB,sRASzC7B,EAAcvB,UAAYmD,C,CAjH1BE,CAAgBf,IAEhB5D,EAAK4E,gBAAkB1E,SAASC,cAAc,yBACzBoC,iBAAiB,SAAS,MAC7C,EAAAsC,EAAAC,aAAYpB,EAAc,IAE5B1D,EAAK+E,WAAa7E,SAASC,cAAc,2BACzCH,EAAKgF,SAAW9E,SAASC,cAAc,yBACvCM,QAAQC,IAAIV,EAAKgF,UACjBhF,EAAK+E,WAAWxC,iBAAiB,QAAS0C,EAAAC,mBAC1ClF,EAAKgF,SAASzC,iBAAiB,QAAS0C,EAAAE,iBAExCxC,EAAcjB,UAAUE,OAAO,aAC/B0B,OAAOf,iBAAiB,QAASY,GACjCG,OAAOf,iBAAiB,UAAWS,GACnCJ,EAAiBL,iBAAiB,QAASO,E","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-ac0df35b8512d7ef.js","src/js/refs-lib.js","src/js/renderLib.js","src/js/lS-lib.js","node_modules/@parcel/runtime-js/lib/runtime-88ba9782e52bbc2f.js","src/js/modal-card-lib.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"QBut0\\\":\\\"library.907eb4cc.js\\\",\\\"bptEZ\\\":\\\"lenta.20eb106a.png\\\",\\\"5UbS1\\\":\\\"index.ef09caa5.css\\\",\\\"YufyT\\\":\\\"index.1c2b4f45.js\\\"}\"));","export const refs = {\n  watchedBtnLib: document.querySelector('[data-lib-watched]'),\n  queueBtnLib: document.querySelector('[data-lib-queue]'),\n  filmLibList: document.querySelector('.film-list'),\n  galleryCont: document.querySelector('.gallery container'),\n};\n","import { refs } from \"./refs-lib\";\n\n\nexport function renderMarkupLib(films) { \n  console.log(films);\n  const markup = films \n    .map(film => { \n      return `<li class=\"cards__item\" data-id=${film.id}> \n          <img \n            class=\"cards__photo\" \n            alt=\"film\" \n            src=\"https://image.tmdb.org/t/p/w500${film.poster_path}\" \n            width=\"395\" \n            loading=\"lazy\" \n          /> \n          <h3 class=\"cards__title\">${film.title}</h3> \n          <p class=\"cards__info\">${film.genres.map(({name})=>name).join(', ')} | ${film.release_date}</p> \n          <p class=\"rating\">${film.vote_average.toFixed(1)}</p>\n        </li>`; \n    }) \n    .join(''); \n  refs.filmLibList.innerHTML=markup; \n  return markup; \n} ","import { renderMarkupLib } from './renderLib';\nimport { refs } from './refs-lib';\nimport img from '../../images/lenta.png';\n\nrefs.watchedBtnLib.addEventListener('click', renderWatchedFilms);\n\nrefs.queueBtnLib.addEventListener('click', renderQueueFilms);\n\nfunction renderWatchedFilms() {\n  const films = JSON.parse(localStorage.getItem('watched')) || [];\n  if (!films.length) {\n    refs.filmLibList.innerHTML = `<p class=\"lib-text\">There are no films here yet</p>\n<img src=\"${img}\" alt=\"lenta\" width=\"500\">`;\n    return;\n  }\n  renderMarkupLib(films);\n  refs.watchedBtnLib.classList.add('active');\n  refs.queueBtnLib.classList.remove('active');\n}\n\nfunction renderQueueFilms() {\n  const films = JSON.parse(localStorage.getItem('queue')) || [];\n  if (!films.length) {\n    refs.filmLibList.innerHTML = `<p class=\"lib-text\">There are no films here ... yet!\n<img src=\"${img}\" alt=\"lenta\" width=\"500\"></p>`;\n    return;\n  }\n  r;\n  renderMarkupLib(films);\n  refs.queueBtnLib.classList.add('active');\n  refs.watchedBtnLib.classList.remove('active');\n}\n\nrenderWatchedFilms();\nrenderQueueFilms();\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"bptEZ\")).toString();","import { FilmAPI } from './FilmAPI.js';\nimport { refs } from './refs-lib.js';\nimport { onOpenVideo } from './trailer.js';\nimport { onWatchedBtnClick, onQueueBtnClick } from './localStorage.js';\nconst filmApi = new FilmAPI();\nconst modalBackdrop = document.querySelector('.backdrop__modal-film');\nconst buttonCloseModal = document.querySelector('#modal-close-button');\nconst modalCardInfo = document.querySelector('.modal-film__info');\n// console.log(onQueueBtnClick);\n\nrefs.filmLibList.addEventListener('click', onOpenModal);\n\nasync function onOpenModal(event) {\n  if (!event.target.closest('[data-id]')) {\n    return;\n  }\n\n  const currentCardId = event.target.closest('li').dataset.id;\n  const movieRes = await filmApi.getFilmDetails(currentCardId);\n  console.log(movieRes);\n  createMovieCard(movieRes);\n\n  refs.openTrailerFilm = document.querySelector('[data-modal-trailer]');\n  refs.openTrailerFilm.addEventListener('click', () => {\n    onOpenVideo(currentCardId);\n  });\n  refs.watchedBtn = document.querySelector('[data-modal-watched-id]');\n  refs.queueBtn = document.querySelector('[data-modal-queue-id]');\n  console.log(refs.queueBtn);\n  refs.watchedBtn.addEventListener('click', onWatchedBtnClick);\n  refs.queueBtn.addEventListener('click', onQueueBtnClick);\n\n  modalBackdrop.classList.remove('is-hidden');\n  window.addEventListener('click', closeModalbyBackdrop);\n  window.addEventListener('keydown', onKeyClick);\n  buttonCloseModal.addEventListener('click', closeModalbyCross);\n}\n\nfunction closeModalbyCross() {\n  modalBackdrop.classList.add('is-hidden');\n  modalCardInfo.innerHTML = '';\n  clearBackdropListeners();\n}\n\nfunction onKeyClick(event) {\n  if (event.code !== 'Escape') {\n    return;\n  }\n  modalBackdrop.classList.add('is-hidden');\n  modalCardInfo.innerHTML = '';\n  clearBackdropListeners();\n}\n\nfunction closeModalbyBackdrop(event) {\n  if (event.target === event.currentTarget) {\n    modalBackdrop.classList.add('is-hidden');\n    modalCardInfo.innerHTML = '';\n    clearBackdropListeners();\n  }\n}\n\nfunction clearBackdropListeners() {\n  window.removeEventListener('keydown', onKeyClick);\n  window.removeEventListener('click', closeModalbyBackdrop);\n  buttonCloseModal.removeEventListener('click', closeModalbyCross);\n}\n\nfunction createMovieCard(obj) {\n  const {\n    title,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    overview,\n    genres,\n    poster_path,\n    id,\n  } = obj;\n  const watchedFilms = JSON.parse(localStorage.getItem('watched')) || [];\n  const queuedFilms = JSON.parse(localStorage.getItem('queue')) || [];\n  const inWatched = watchedFilms.some(film => film.id === id);\n  const inQueued = queuedFilms.some(film => film.id === id);\n  const genresArr = genres.map(el => el.name);\n\n  const markupModal = `\n        <div class=\"film-card\">\n            <div class=\"film-card__img\">\n            <img class=\"film-card__picture\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${title}\" width=\"375\">\n            </div>\n            <div class=\"film-card__info\">\n            <h2 class=\"film-card__title\">${title}</h2>\n            <div class=\"film-card__general-info\">\n                <ul class=\"info-list\">\n                <li class=\"info\">\n                <p class=\"info-item\">Vote/Votes</p>\n                <p class=\"info-result\"><span class=\"accent-vote\">${vote_average.toFixed(\n                  1\n                )}</span>/${vote_count}</p>\n                </li>\n                <li class=\"info\">\n                <p class=\"info-item\">Popularity</p>\n                <p class=\"info-result\">${popularity.toFixed(1)}</p>\n                </li>\n                <li class=\"info\">\n                <p class=\"info-item\">Original Title</p>\n                <p class=\"info-result  to-up\">${original_title}</p>\n                </li>\n                <li class=\"info\">\n                <p class=\"info-item\">Genre</p>\n                <p class=\"info-result\">${[...genresArr]}</p>\n                </li>\n                </ul>\n            </div>\n            <p class=\"film-card__overview-title\">About</p>\n            <p class=\"film-card__overview\">${overview}</p>\n            <div class=\"modal-film__buttons-block\">\n                <button type=\"submit\" class=\"btn-watched button\" data-modal-watched-id=${id} data-action=\"${\n    inWatched ? 'remove' : 'add'\n  }\">\n        ${inWatched ? 'Remove from watched' : 'Add to watch'}</button>\n                <button type=\"submit\" class=\"btn-queue button\" data-modal-queue-id=${id}  data-action=\"${\n    isQueued ? 'remove' : 'add'\n  }\">\n        ${isQueued ? 'Remove from queue' : 'Add to queue'}</button>\n                <button type=\"submit\" class=\"btn-trailer button\" data-modal-trailer><span></span>\n        <span></span>\n        <span></span>\n        <span></span>Watch trailer</button>\n            </div>\n            </div>\n        </div>\n    `;\n  modalCardInfo.innerHTML = markupModal;\n  return markupModal;\n}\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$46347076cc9f8e85$export$21666b427502ea6d","watchedBtnLib","document","querySelector","queueBtnLib","filmLibList","galleryCont","$bbadd28dbdeb8bd5$export$4f19a777e63c9bb8","films","console","log","markup","map","film","poster_path","title","genres","name","join","release_date","vote_average","toFixed","innerHTML","$5f9454757ad34c24$var$renderWatchedFilms","localStorage","getItem","classList","add","remove","$parcel$interopDefault","$d96a20649022094a$exports","$5f9454757ad34c24$var$renderQueueFilms","r","URL","resolve","import","meta","url","toString","addEventListener","$hv3Jw","$7c5b3959f6dbe73a$var$filmApi","FilmAPI","$7c5b3959f6dbe73a$var$modalBackdrop","$7c5b3959f6dbe73a$var$buttonCloseModal","$7c5b3959f6dbe73a$var$modalCardInfo","$7c5b3959f6dbe73a$var$closeModalbyCross","$7c5b3959f6dbe73a$var$clearBackdropListeners","$7c5b3959f6dbe73a$var$onKeyClick","event","code","$7c5b3959f6dbe73a$var$closeModalbyBackdrop","target","currentTarget","window","removeEventListener","async","closest","currentCardId","dataset","movieRes","getFilmDetails","obj","vote_count","popularity","original_title","overview","watchedFilms","queuedFilms","inWatched","some","genresArr","el","markupModal","isQueued","$7c5b3959f6dbe73a$var$createMovieCard","openTrailerFilm","$37v9V","onOpenVideo","watchedBtn","queueBtn","$31u3U","onWatchedBtnClick","onQueueBtnClick"],"version":3,"file":"library.907eb4cc.js.map"}